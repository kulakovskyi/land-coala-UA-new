"use strict";

var playBtn = document.querySelector('.sam__main-wheel-btn'),
    playBtnText = document.querySelector('.sam__main-wheel-btn span'),
    wheel = document.querySelector('.sam__main-wheel-reel'),
    tries = document.querySelector('.try-number'),
    triesFull = document.querySelector('.sam__main-left-try'),
    overlay = document.querySelector('.sam__overlay'),
    popupFirst = document.querySelector('.sam__firstWin'),
    popupFirstBtn = document.querySelector('.sam__firstWin-btn'),
    popupSecond = document.querySelector('.sam__secondWin'),
    popupSecondRules = document.querySelector('.sam__secondWin-rules'),
    rules = document.querySelector('.sam__rules'),
    footerRulesBtn = document.querySelector('.sam__footer-rules'),
    mobRulesBtn = document.querySelector('.sam__infoMob-txt-more'),
    overflow = document.querySelector('body'),
    popupClose = document.querySelector('.sam__rules-close'),
    video = document.querySelector('.sam__main-video-bg'),
    wrapper = document.querySelector('.sam'),
    totalTriesCounter = 2;
var triesCounter = 0;
footerRulesBtn.addEventListener('click', function () {
  overlay.classList.remove('opacity-overlay');
  rules.classList.remove('hide');
});
mobRulesBtn.addEventListener('click', function () {
  overlay.classList.remove('opacity-overlay');
  rules.classList.remove('hide');
  overflow.style.overflow = 'hidden';
});
popupClose.addEventListener('click', function () {
  overlay.classList.add('opacity-overlay');
  rules.classList.add('hide');
  overflow.style.overflow = 'unset';
});
playBtn.addEventListener('click', function () {
  if (triesCounter === 0) {
    runFirstRotation();
  } else {
    runSecondRotation();
  }
});

function updTriesCounter() {
  var cnt = totalTriesCounter - triesCounter;

  if (cnt === 2) {
    tries.innerText = "2 спроби";
  } else if (cnt === 1) {
    tries.innerText = "1 спроба";
  } else {
    tries.innerText = "0 спроб";
  }
}

function runFirstRotation() {
  wheel.classList.add('reel-rotation-first');
  playBtn.classList.remove('pulse-btn');
  playBtnText.classList.add('hide');
  playBtn.style.transform = 'scale(0.7)';
  playBtn.style.cursor = 'default';
  wrapper.style.pointerEvents = 'none';
  setTimeout(function () {
    if (window.innerWidth <= 500) {
      triesFull.style.opacity = '0';
    }
  }, 700);
  setTimeout(function () {
    doAfterFirstRotation();
  }, 6000);
  triesCounter++;
  updTriesCounter();
}

function doAfterFirstRotation() {
  wheel.style.transform = 'rotate(992deg)';
  wheel.classList.remove('reel-rotation-first');
  displayPopup(popupFirst);
  wrapper.style.pointerEvents = 'auto';
  overflow.style.overflow = 'hidden';
  setTimeout(function () {
    playBtn.classList.add('pulse-btn');
    playBtnText.classList.remove('hide');
    playBtn.style.transform = 'scale(1)';
    playBtn.style.cursor = 'pointer';
  }, 1200);
}

function runSecondRotation() {
  wheel.classList.add('reel-rotation-second');
  playBtn.classList.remove('pulse-btn');
  playBtnText.classList.add('hide');
  playBtn.style.transform = 'scale(0.7)';
  playBtn.style.cursor = 'default';
  overflow.style.overflow = 'hidden';
  wrapper.style.pointerEvents = 'none';
  setTimeout(function () {
    doAfterSecondRotation();
  }, 6000);
  triesCounter++;
  updTriesCounter();
}

function doAfterSecondRotation() {
  displayPopup(popupSecond);
  wrapper.style.pointerEvents = 'auto';
  popupSecondRules.addEventListener('click', function () {
    popupSecond.classList.add('hide');
    rules.classList.add('popup-win');
    rules.classList.remove('hide');
  });
}

popupFirstBtn.addEventListener('click', function () {
  overlay.classList.add('opacity-overlay');
  popupFirst.classList.add('hide');
  overflow.style.overflow = 'unset';
});

function displayPopup(popup) {
  overlay.classList.remove('opacity-overlay');
  popup.classList.remove('hide');
}

window.onload = videoSource(video, 'img/video.mp4', 'video/mp4');

function videoSource(element, src, type) {
  if (window.innerWidth > 1024) {
    var source = document.createElement('source');
    source.src = src;
    source.type = type;
    video.appendChild(source);
  }
}
"use strict";
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzZWNvbmQuanMiXSwibmFtZXMiOlsicGxheUJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBsYXlCdG5UZXh0Iiwid2hlZWwiLCJ0cmllcyIsInRyaWVzRnVsbCIsIm92ZXJsYXkiLCJwb3B1cEZpcnN0IiwicG9wdXBGaXJzdEJ0biIsInBvcHVwU2Vjb25kIiwicG9wdXBTZWNvbmRSdWxlcyIsInJ1bGVzIiwiZm9vdGVyUnVsZXNCdG4iLCJtb2JSdWxlc0J0biIsIm92ZXJmbG93IiwicG9wdXBDbG9zZSIsInZpZGVvIiwid3JhcHBlciIsInRvdGFsVHJpZXNDb3VudGVyIiwidHJpZXNDb3VudGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInJlbW92ZSIsInN0eWxlIiwiYWRkIiwicnVuRmlyc3RSb3RhdGlvbiIsInJ1blNlY29uZFJvdGF0aW9uIiwidXBkVHJpZXNDb3VudGVyIiwiY250IiwiaW5uZXJUZXh0IiwidHJhbnNmb3JtIiwiY3Vyc29yIiwicG9pbnRlckV2ZW50cyIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwib3BhY2l0eSIsImRvQWZ0ZXJGaXJzdFJvdGF0aW9uIiwiZGlzcGxheVBvcHVwIiwiZG9BZnRlclNlY29uZFJvdGF0aW9uIiwicG9wdXAiLCJvbmxvYWQiLCJ2aWRlb1NvdXJjZSIsImVsZW1lbnQiLCJzcmMiLCJ0eXBlIiwic291cmNlIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIl0sIm1hcHBpbmdzIjoiOztBQUNBLElBQU1BLE9BQU8sR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLHNCQUF2QixDQUFoQjtBQUFBLElBQ01DLFdBQVcsR0FBR0YsUUFBUSxDQUFDQyxhQUFULENBQXVCLDJCQUF2QixDQURwQjtBQUFBLElBRU1FLEtBQUssR0FBR0gsUUFBUSxDQUFDQyxhQUFULENBQXVCLHVCQUF2QixDQUZkO0FBQUEsSUFHTUcsS0FBSyxHQUFHSixRQUFR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QUNBRCxJQUFBQSxNQUFNLENBQUNGLEdBQVAsR0FBYUEsR0FBYjtBQUNBRSxJQUFBQSxNQUFNLENBQUNELElBQVAsR0FBY0EsSUFBZDtBQUNBN0IsSUFBQUEsS0FBSyxDQUFDZ0MsV0FBTixDQUFrQkYsTUFBbEI7QUFDSDtBQUNKO0FDdklEIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IHBsYXlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2FtX19tYWluLXdoZWVsLWJ0bicpLFxuICAgICAgcGxheUJ0blRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2FtX19tYWluLXdoZWVsLWJ0biBzcGFuJyksXG4gICAgICB3aGVlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYW1fX21haW4td2hlZWwtcmVlbCcpLFxuICAgICAgdHJpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJ5LW51bWJlcicpLFxuICAgICAgdHJpZXNGdWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNhbV9fbWFpbi1sZWZ0LXRyeScpLFxuICAgICAgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYW1fX292ZXJsYXknKSxcbiAgICAgIHBvcHVwRmlyc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2FtX19maXJzdFdpbicpLFxuICAgICAgcG9wdXBGaXJzdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYW1fX2ZpcnN0V2luLWJ0bicpLFxuICAgICAgcG9wdXBTZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2FtX19zZWNvbmRXaW4nKSxcbiAgICAgIHBvcHVwU2Vjb25kUnVsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2FtX19zZWNvbmRXaW4tcnVsZXMnKSxcbiAgICAgIHJ1bGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNhbV9fcnVsZXMnKSxcbiAgICAgIGZvb3RlclJ1bGVzQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNhbV9fZm9vdGVyLXJ1bGVzJyksXG4gICAgICBtb2JSdWxlc0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYW1fX2luZm9Nb2ItdHh0LW1vcmUnKSxcbiAgICAgIG92ZXJmbG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLFxuICAgICAgcG9wdXBDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYW1fX3J1bGVzLWNsb3NlJyksXG4gICAgICB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYW1fX21haW4tdmlkZW8tYmcnKSxcbiAgICAgIHdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2FtJyksXG4gICAgICB0b3RhbFRyaWVzQ291bnRlciA9IDJcblxubGV0IHRyaWVzQ291bnRlciA9IDBcblxuZm9vdGVyUnVsZXNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdvcGFjaXR5LW92ZXJsYXknKVxuICAgIHJ1bGVzLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxufSlcblxubW9iUnVsZXNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdvcGFjaXR5LW92ZXJsYXknKVxuICAgIHJ1bGVzLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxuICAgIG92ZXJmbG93LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcbn0pXG5cbnBvcHVwQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LW92ZXJsYXknKVxuICAgIHJ1bGVzLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxuICAgIG92ZXJmbG93LnN0eWxlLm92ZXJmbG93ID0gJ3Vuc2V0J1xufSlcblxucGxheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBpZiAodHJpZXNDb3VudGVyID09PSAwKSB7XG4gICAgICAgIHJ1bkZpcnN0Um90YXRpb24oKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJ1blNlY29uZFJvdGF0aW9uKClcbiAgICB9XG59KVxuXG5mdW5jdGlvbiB1cGRUcmllc0NvdW50ZXIoKSB7XG4gICAgY29uc3QgY250ID0gdG90YWxUcmllc0NvdW50ZXIgLSB0cmllc0NvdW50ZXJcbiAgICBpZiAoY250ID09PSAyKSB7XG4gICAgICAgIHRyaWVzLmlubmVyVGV4dCA9IFwiMiDRgdC/0YDQvtCx0LhcIlxuICAgIH0gZWxzZSBpZiAoY250ID09PSAxKSB7XG4gICAgICAgIHRyaWVzLmlubmVyVGV4dCA9IFwiMSDRgdC/0YDQvtCx0LBcIlxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyaWVzLmlubmVyVGV4dCA9IFwiMCDRgdC/0YDQvtCxXCJcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJ1bkZpcnN0Um90YXRpb24oKSB7XG4gICAgd2hlZWwuY2xhc3NMaXN0LmFkZCgncmVlbC1yb3RhdGlvbi1maXJzdCcpXG4gICAgcGxheUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdwdWxzZS1idG4nKVxuICAgIHBsYXlCdG5UZXh0LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxuICAgIHBsYXlCdG4uc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDAuNyknXG4gICAgcGxheUJ0bi5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCdcbiAgICB3cmFwcGVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSdcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDUwMCkge1xuICAgICAgICAgICAgdHJpZXNGdWxsLnN0eWxlLm9wYWNpdHkgPSAnMCdcbiAgICAgICAgfVxuICAgIH0sIDcwMClcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZG9BZnRlckZpcnN0Um90YXRpb24oKVxuICAgIH0sIDYwMDApXG4gICAgdHJpZXNDb3VudGVyKytcbiAgICB1cGRUcmllc0NvdW50ZXIoKVxufVxuXG5mdW5jdGlvbiBkb0FmdGVyRmlyc3RSb3RhdGlvbigpIHtcbiAgICB3aGVlbC5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlKDk5MmRlZyknXG4gICAgd2hlZWwuY2xhc3NMaXN0LnJlbW92ZSgncmVlbC1yb3RhdGlvbi1maXJzdCcpXG4gICAgZGlzcGxheVBvcHVwKHBvcHVwRmlyc3QpXG4gICAgd3JhcHBlci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nXG4gICAgb3ZlcmZsb3cuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBwbGF5QnRuLmNsYXNzTGlzdC5hZGQoJ3B1bHNlLWJ0bicpXG4gICAgICAgIHBsYXlCdG5UZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxuICAgICAgICBwbGF5QnRuLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgxKSdcbiAgICAgICAgcGxheUJ0bi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcidcbiAgICB9LCAxMjAwKVxufVxuXG5mdW5jdGlvbiBydW5TZWNvbmRSb3RhdGlvbigpIHtcbiAgICB3aGVlbC5jbGFzc0xpc3QuYWRkKCdyZWVsLXJvdGF0aW9uLXNlY29uZCcpXG4gICAgcGxheUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdwdWxzZS1idG4nKVxuICAgIHBsYXlCdG5UZXh0LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxuICAgIHBsYXlCdG4uc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDAuNyknXG4gICAgcGxheUJ0bi5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCdcbiAgICBvdmVyZmxvdy5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gICAgd3JhcHBlci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRvQWZ0ZXJTZWNvbmRSb3RhdGlvbigpXG4gICAgfSwgNjAwMClcbiAgICB0cmllc0NvdW50ZXIrK1xuICAgIHVwZFRyaWVzQ291bnRlcigpXG59XG5cbmZ1bmN0aW9uIGRvQWZ0ZXJTZWNvbmRSb3RhdGlvbigpIHtcbiAgICBkaXNwbGF5UG9wdXAocG9wdXBTZWNvbmQpXG4gICAgd3JhcHBlci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nXG4gICAgcG9wdXBTZWNvbmRSdWxlcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgcG9wdXBTZWNvbmQuY2xhc3NMaXN0LmFkZCgnaGlkZScpXG4gICAgICAgIHJ1bGVzLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLXdpbicpXG4gICAgICAgIHJ1bGVzLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxuICAgIH0pXG59XG5cbnBvcHVwRmlyc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LW92ZXJsYXknKVxuICAgIHBvcHVwRmlyc3QuY2xhc3NMaXN0LmFkZCgnaGlkZScpXG4gICAgb3ZlcmZsb3cuc3R5bGUub3ZlcmZsb3cgPSAndW5zZXQnXG59KVxuXG5mdW5jdGlvbiBkaXNwbGF5UG9wdXAocG9wdXApIHtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ29wYWNpdHktb3ZlcmxheScpXG4gICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpXG59XG5cbndpbmRvdy5vbmxvYWQgPSB2aWRlb1NvdXJjZSh2aWRlbywgJ2ltZy92aWRlby5tcDQnLCAndmlkZW8vbXA0JylcbmZ1bmN0aW9uIHZpZGVvU291cmNlKGVsZW1lbnQsIHNyYywgdHlwZSkge1xuICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoID4gMTAyNCkge1xuICAgICAgICBsZXQgc291cmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJylcbiAgICAgICAgc291cmNlLnNyYyA9IHNyY1xuICAgICAgICBzb3VyY2UudHlwZSA9IHR5cGVcbiAgICAgICAgdmlkZW8uYXBwZW5kQ2hpbGQoc291cmNlKVxuICAgIH1cbn0iLCIiXX0=
